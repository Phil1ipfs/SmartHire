<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Employer Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { margin:0; font-family:Arial, sans-serif; background:#E8F1FD; padding-bottom:60px; }
    .navbar { display:flex; justify-content:space-between; align-items:center; background:#95BEF5; padding:15px 30px; position:sticky; top:0; }
    .navbar .logo { font-size:20px; font-weight:bold; color:#08106E; }
    .navbar-right { display:flex; align-items:center; gap:25px; }
    .navbar .menu { display:flex; gap:20px; }
    .navbar .menu a { color:#08106E; text-decoration:none; font-weight:bold; position:relative; }
    .navbar .menu a::after { content:''; position:absolute; left:0; bottom:-3px; width:0; height:2px; background:#08106E; transition:width 0.3s ease; }
    .navbar .menu a:hover::after { width:100%; }
    .logout-btn { background:#08106E; color:white; padding:6px 12px; border:none; border-radius:5px; cursor:pointer; font-weight:bold; }
    .content { padding:30px; }
    .card { background:white; padding:20px; border-radius:10px; box-shadow:0px 3px 6px rgba(0,0,0,0.1); margin-bottom:20px; }
    .image-slider { width:100%; max-width:1500px; height:300px; margin:0 auto 20px auto; overflow:hidden; border-radius:10px; position:relative; }
    .slides { display:flex; animation:slide 21s infinite; }
    .slides img { width:100%; flex-shrink:0; height:400px; object-fit:cover; }
    @keyframes slide { 0%{transform:translateX(0)}30%{transform:translateX(0)}35%{transform:translateX(-100%)}65%{transform:translateX(-100%)}70%{transform:translateX(-200%)}100%{transform:translateX(-200%)} }
    .stats-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;margin:30px 0;}
    .stat-card{background:#08106E;color:white;padding:30px 20px;border-radius:14px;text-align:center;box-shadow:0px 4px 10px rgba(0,0,0,0.2);transition:transform 0.2s;cursor:pointer;}
    .stat-card:hover{transform:translateY(-5px);background:#0c1c99;}
    table{width:100%;border-collapse:collapse;margin-top:15px;background:white;border-radius:10px;overflow:hidden;box-shadow:0px 3px 6px rgba(0,0,0,0.1)}
    table thead{background:#08106E;color:white}
    table th, table td{padding:12px 15px;text-align:left;border-bottom:1px solid #ddd;vertical-align:top}
    table tr:hover{background:#f1f4ff}
    .download-btn{background:#08106E;color:white;padding:5px 10px;border-radius:5px;text-decoration:none;border:none;cursor:pointer}
    .archive-btn{background:#d9534f;color:white;padding:5px 10px;border:none;border-radius:5px;cursor:pointer}
    .profile-info{display:flex;gap:40px;align-items:center}
    .profile-info img{width:120px;height:120px;border-radius:50%;object-fit:cover;border:4px solid #08106E}
    .profile-details p{margin:5px 0;font-size:16px}
    .footer{background:#F0F1F7;color:#08106E;text-align:center;padding:15px;font-weight:bold;position:fixed;bottom:0;width:100%}
    .toast { position: fixed; bottom: 30px; right: 30px; background: #08106E; color: white; padding: 15px 25px; border-radius: 8px;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.3); opacity: 0; transform: translateY(20px); transition: all 0.4s ease; z-index: 9999;}
    .toast.show {opacity: 1; transform: translateY(0);}
    .show-all-btn { background:#08106E; color:white; padding:10px 15px; border:none; border-radius:8px; font-weight:bold; margin-top:15px; cursor:pointer; }
    .show-all-btn:hover { background:#0c1c99; }

    /* Toast Notification Styles */
    .toast-container {
        position: fixed;
        bottom: 30px;
        right: 30px;
        z-index: 10000;
        pointer-events: none;
    }
    .toast {
        background: #08106E;
        color: white;
        padding: 14px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        margin-bottom: 10px;
        opacity: 0;
        transform: translateX(120%);
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        min-width: 250px;
        max-width: 400px;
        font-weight: 500;
        pointer-events: auto;
    }
    .toast.show {
        opacity: 1;
        transform: translateX(0);
    }
    .toast.success {
        background: #28a745;
    }
    .toast.error {
        background: #dc3545;
    }
    .toast.warning {
        background: #ffc107;
        color: #000;
    }
    .toast.info {
        background: #17a2b8;
    }

.status-badge {
    padding: 0.2rem 0.5rem;
    border-radius: 0.25rem;
    font-weight: bold;
    color: white;
    display: inline-block;
    text-align: center;
}
.status-badge {
    padding: 0.2rem 0.5rem;
    border-radius: 0.25rem;
    font-weight: bold;
    color: black;
    display: inline-block;
    text-align: center;
}

/* --- NEW SCREENING FORM STYLES --- */
.screening-form {
    padding: 30px;
    margin-top: 20px;
    border: 1px solid #c7d8f9; /* Light blue border */
    border-radius: 12px;
    background: #f8fbff; /* Very light background for contrast */
    box-shadow: 0 4px 10px rgba(8, 16, 110, 0.08); /* Subtle shadow */
    margin-bottom: 30px;
}

.form-group-section {
    margin-bottom: 25px; /* Increased spacing between sections */
}

.form-label {
    display: block;
    font-weight: bold;
    color: #08106E; /* Primary text color */
    margin-bottom: 8px;
    font-size: 1.1em;
}

.form-input-file,
.form-textarea,
.form-select {
    display: block;
    width: 100%;
    padding: 10px 12px;
    border: 1px solid #95BEF5; /* Blue border for inputs */
    border-radius: 6px;
    transition: border-color 0.3s, box-shadow 0.3s;
    box-sizing: border-box;
}

.form-textarea {
    min-height: 120px;
    resize: vertical;
}

.form-input-file:focus,
.form-textarea:focus,
.form-select:focus {
    border-color: #08106E;
    box-shadow: 0 0 0 3px rgba(8, 16, 110, 0.1);
    outline: none;
}

.screen-btn {
    /* Uses the existing .download-btn style but explicitly colors it */
    background: #08106E;
    color: white;
    padding: 12px 25px;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.3s;
    font-size: 1.05em;
}

.screen-btn:hover {
    background: #0c1c99;
}
/* --- END NEW SCREENING FORM STYLES --- */

  </style>
</head>
<body>
  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>
  <div class="navbar">
    <div class="logo">SmartHire Employer</div>
    <div class="navbar-right">
      <div class="menu">
        <a href="#dashboard">Dashboard</a>
        <a href="#profile">Profile</a>
        <a href="#job-posting">Job Posting</a>
        <a href="#uploaded-resume">Uploaded Resume</a>
        <a href="#resume-screening">Resume Screening</a>
      </div>
      <form action="/" method="GET"><button class="logout-btn" onclick="showToast('Logging out...', 'info', 2000)">Logout</button></form>
    </div>
  </div>

  <div class="content">
    <h1>Welcome, Employer!</h1>

    <div class="card" id="dashboard">
      <div class="image-slider">
        <div class="slides">
          <img src="{{ url_for('static', filename='images/dashboardE1.jpg') }}" alt="Slide 1">
          <img src="{{ url_for('static', filename='images/dashboardE2.jpg') }}" alt="Slide 2">
          <img src="{{ url_for('static', filename='images/dashboardE3.jpg') }}" alt="Slide 3">
        </div>
      </div>

      <div class="dashboard-overview">
        <h2>üìä Dashboard Overview</h2>
        <p>Click a section below to view detailed records.</p>

        <div class="stats-container">
          <div class="stat-card" onclick="showDetails('job_postings')"><h3>Job Posted</h3><p>{{ jobs|length }}</p></div>
          <div class="stat-card" onclick="showDetails('uploaded_resumes')"><h3>Uploaded Resume</h3><p>{{ resumes|length }}</p></div>
          <div class="stat-card" onclick="showDetails('interviews')"><h3>Interviews Scheduled</h3><p>{{ interviews|length if interviews else 0 }}</p></div>
        </div>

        <div class="card" id="detailed-records">
          <h2>üìë Detailed Records</h2>
          <div id="details-content">
            <p>Select a section above to view detailed records.</p>
          </div>
          <button class="show-all-btn" onclick="showDetails('all'); showToast('Loading all records...', 'info', 1500)">Show All Records</button>
        </div>
      </div>
    </div>

    <!-- Employer Profile -->
    <div class="card" id="profile">
      <h2>üë§ Employer Profile</h2>
      <div class="profile-info">
        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Profile Picture">
        <div class="profile-details">
          <p><strong>Full Name:</strong> John Doe</p>
          <p><strong>Email:</strong> johndoe@example.com</p>
          <p><strong>Position:</strong> HR Manager</p>
          <p><strong>Phone:</strong> +63 912 345 6789</p>
          <p><strong>Member Since:</strong> January 2024</p>
        </div>
      </div>
    </div>

<!-- Job Posting -->
<div class="card" id="job-posting">
  <h2>üíº Job Posting</h2>
  <a href="{{ url_for('add_job_page') }}" class="download-btn" onclick="showToast('Opening add job form...', 'info', 1500)">Add Job</a>

  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Company</th>
        <th>Status</th>
        <th>Date Posted</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for job in jobs %}
      <tr>
        <td>{{ job.id }}</td>
        <td>{{ job.title }}</td>
        <td>{{ job.company }}</td>
        <td>
          {% if job.status.lower() == 'pending' %}
            <span class="status-badge status-pending">{{ job.status }}</span>
          {% elif job.status.lower() == 'approved' %}
            <span class="status-badge status-approved">{{ job.status }}</span>
          {% else %}
            <span class="status-badge">{{ job.status }}</span>
          {% endif %}
        </td>
        <td>{{ job.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</td>
        <td>
          <form action="{{ url_for('edit_job', job_id=job.id) }}" method="GET" style="display:inline;">
            <button type="submit" class="download-btn" onclick="showToast('Opening edit form...', 'info', 1500)">Edit</button>
          </form>
          <form action="{{ url_for('delete_job', job_id=job.id) }}" method="POST" style="display:inline;">
            <button type="submit" class="archive-btn" onclick="showToast('Archiving job...', 'warning', 2000)">Archive</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- Uploaded Resume -->
<div class="card" id="uploaded-resume">
    <h2>üìÇ Resume Database (Resume Table)</h2>
    <p style="color: #6b7aa8; margin-bottom: 15px;">üíæ <strong>Resume Table:</strong> All resumes uploaded by applicants are stored here. Employers can select these resumes for screening and job matching.</p>
    <table>
        <thead>
            <tr>
                <th>Applicant Name</th>
                <th>Resume</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for resume in resumes %}
            {# Check if the filename DOES NOT start with 'screen_' to filter out manual screens #}
            {% if not resume.filename.startswith('screen_') %}
            <tr>
                <td>{{ resume.owner_name | default('N/A') }}</td>
                <td>{{ resume.filename }}</td>
                <td>
                    <a href="{{ url_for('download_resume', filename=resume.filename) }}" class="download-btn" target="_blank" onclick="showToast('Downloading resume...', 'info', 2000)">Download</a>
                    
                    <form action="{{ url_for('delete_resume', resume_id=resume.id) }}" method="POST" style="display:inline; margin-left: 10px;">
                        <button type="submit" class="archive-btn" onclick="showToast('Archiving resume...', 'warning', 2000)">Archive</button>
                    </form>
                </td>
            </tr>
            {% endif %}
            {% endfor %}
        </tbody>
    </table>
</div>

    <!-- Resume Screening -->
<div class="card" id="resume-screening">
    <h2>üìù Resume Screening & Job Matching</h2>

<p><strong>üíæ Database Flow:</strong> Select a resume from the <strong>Resume table</strong> below, or upload a new one. All screening details will be saved to the <strong>Screening table</strong> for job matching.</p>

<!-- Select Resume from Database -->
<div style="margin-bottom: 25px; padding: 20px; background: #f8fbff; border: 1px solid #c7d8f9; border-radius: 12px;">
    <h3 style="margin-top: 0; color: #08106E;">üìÇ Select Resume from Database (Resume Table)</h3>
    <p style="color: #6b7aa8; margin-bottom: 15px;">Choose an existing resume from the Resume table to screen against your jobs:</p>
    
    <form action="{{ url_for('screen_existing_resume') }}" method="POST" id="selectResumeForm" style="margin-bottom: 15px;">
        <div style="display: grid; grid-template-columns: 2fr 2fr 1fr; gap: 12px; align-items: end;">
            <div>
                <label for="existing_resume_id" class="form-label" style="margin-bottom: 8px;">Select Resume:</label>
                <select name="resume_id" id="existing_resume_id" class="form-select" required>
                    <option value="">-- Choose a resume from Resume table --</option>
                    {% for resume in resumes %}
                        {% if not resume.filename.startswith('screen_') %}
                        <option value="{{ resume.id }}" data-owner="{{ resume.owner_name }}" data-filename="{{ resume.filename }}">
                            {{ resume.owner_name }} - {{ resume.filename }} (Uploaded: {{ resume.uploaded_at.strftime('%Y-%m-%d') if resume.uploaded_at else 'N/A' }})
                        </option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div>
            <div>
                <label for="existing_job_id" class="form-label" style="margin-bottom: 8px;">Select Job to Match:</label>
                <select name="job_id" id="existing_job_id" class="form-select" required>
                    <option value="">-- Select a job to match against --</option>
                    {% for job in jobs %}
                        <option value="{{ job.id }}">{{ job.title }} - {{ job.company }}</option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <button type="submit" class="screen-btn" style="width: 100%;" onclick="showToast('Screening resume...', 'info', 2000)">üîç Screen Resume</button>
            </div>
        </div>
    </form>
    
    <p style="color: #6b7aa8; font-size: 13px; margin: 0;">
        üí° <strong>Tip:</strong> Resumes in the Resume table come from applicant uploads. Select one to screen it against your job posts.
    </p>
</div>

<p style="margin-top: 20px;"><strong>Or upload a new resume:</strong> Upload a PDF resume and match it against one of your posted jobs. The system will automatically use the job description for matching when you select a job.</p>

<form action="{{ url_for('upload_screening') }}" method="POST" enctype="multipart/form-data" class="screening-form" id="screeningForm">
    
    <div class="form-group-section">
        <label for="job_id" class="form-label">üéØ Select Job to Match Against (Recommended):</label>
        <select name="job_id" id="job_id" class="form-select">
            <option value="">-- Select a Job Post (Auto-fills description below) --</option>
            {% for job in jobs %}
                <option value="{{ job.id }}" data-description="{{ job.description }}" data-title="{{ job.title }}" data-location="{{ job.location or '' }}" data-job-type="{{ job.job_type or '' }}">
                    {{ job.title }} - {{ job.company }} (ID: {{ job.id }})
                </option>
            {% endfor %}
        </select>
        <small style="color: #6b7aa8; display: block; margin-top: 5px;">üí° Tip: Selecting a job will automatically populate the job description below.</small>
    </div>

    <div class="form-group-section">
        <label for="resume_file" class="form-label">Upload Resume (PDF only):</label>
        <input type="file" name="resume_file" id="resume_file" accept=".pdf" required class="form-input-file">
    </div>

    <div class="form-group-section">
        <label for="job_description" class="form-label">Job Description (Auto-filled when job is selected):</label>
        <textarea name="job_description" id="job_description" rows="8" placeholder="Select a job above to auto-fill, or manually paste the job requirements and description here for skill matching." class="form-textarea"></textarea>
        <small style="color: #6b7aa8; display: block; margin-top: 5px;">This field will be automatically filled when you select a job above. You can also edit it manually if needed.</small>
    </div>

    <button type="submit" class="screen-btn" onclick="showToast('Screening resume...', 'info', 2000)">
        üöÄ Screen Resume
    </button>
</form>
{% if screenings %}
        <h4 style="margin-top:40px;">‚úÖ Screening History - All Details Saved in Screening Table (Total: {{ screenings|length }})</h4>
        <p style="color: #6b7aa8; font-size: 13px; margin-bottom: 15px;">
            üíæ <strong>Screening Table:</strong> All screening details are stored here including applicant info, job description, matched skills, match score, and resume summary.
        </p>
        <table style="width:100%;"> 
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Applicant Details</th>
                    <th>Matched Job</th>
                    <th>Matched Skills</th> 
                    <th>Match Score</th>
                    <th>Screened Date</th>
                    <th style="text-align: center;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for s in screenings %}
                <tr>
                    <td><strong>#{{ s.id }}</strong></td>
                    <td>
                        <strong>{{ s.applicant_name | default('N/A') }}</strong><br>
                        <small style="color: #6b7aa8;">üìß {{ s.applicant_email | default('N/A') }}</small><br>
                        <small style="color: #6b7aa8;">üìû {{ s.applicant_phone | default('N/A') }}</small>
                    </td>
                    <td>
                        {% if s.job %}
                            <strong>{{ s.job.title }}</strong><br>
                            <small style="color: #6b7aa8;">{{ s.job.company }}</small>
                        {% else %}
                            <span style="color: #6b7aa8; font-style: italic;">General Screening</span>
                        {% endif %}
                    </td>
                    <td>
                        <span title="{{ s.matched_skills | default('N/A') }}">
                            {{ s.matched_skills | default('N/A') | truncate(50) }}
                        </span>
                    </td>
                    <td>
                        <strong style="color: {% if s.match_score >= 80 %}#0c9a3e{% elif s.match_score >= 60 %}#e6a700{% else %}#d9534f{% endif %}; font-size: 16px;">
                            {{ s.match_score | round(2) }}%
                        </strong>
                    </td>
                    <td>{{ s.screened_at.strftime('%Y-%m-%d<br>%H:%M') | safe }}</td>
                    <td style="text-align: center;">
                        <form action="{{ url_for('delete_screening', screening_id=s.id) }}" method="POST" style="display:inline;">
                            <button type="submit" class="archive-btn" onclick="showToast('Archiving screening...', 'warning', 2000)">Archive</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <p style="margin-top:15px; color: #6b7aa8; font-size: 13px;">
            üíæ <strong>All screening details are saved in the database:</strong> Applicant info, job description, matched skills, match score, resume summary, and timestamp.
        </p>
    {% else %}
        <p style="margin-top:15px;">No resumes have been screened yet. Use the form above to begin! All screening details will be saved to the database.</p>
    {% endif %}
</div>

<footer class="footer">¬© 2025 SmartHire. All rights reserved.</footer>

<script>
    function showDetails(type) {
        let content = "";
        
        // --- Dashboard Overview Click Handlers ---
        if (type === "job_postings") {
            content = `
                <h3>üíº Total Job Postings</h3>
                <table>
                    <thead><tr><th>ID</th><th>Title</th><th>Status</th></tr></thead>
                    <tbody>
                        {% for job in jobs %}
                            <tr><td>{{ job.id }}</td><td>{{ job.title }}</td><td>{{ job.status }}</td></tr>
                        {% endfor %}
                    </tbody>
                </table>`;
        } else if (type === "uploaded_resumes") {
            content = `
                <h3>üìÇ Uploaded Resumes</h3>
                <table>
                    <thead><tr><th>Applicant</th><th>File Name</th></tr></thead>
                    <tbody>
                        {% for resume in resumes %}
                            <tr><td>{{ resume.owner_name | default('Applicant ID ' ~ resume.applicant_id) }}</td><td>{{ resume.filename }}</td></tr>
                        {% endfor %}
                    </tbody>
                </table>`;
        } else if (type === "shortlisted") {
            // Updated to use the reliable s.applicant_name | default('N/A')
            content = `
                <h3>‚≠ê Shortlisted Resumes (Match Score > 80%)</h3>
                <table>
                    <thead><tr><th>Applicant</th><th>Match Score</th></tr></thead>
                    <tbody>
                        {% for s in screenings %} 
                            {% if s.match_score > 80 %}  
                                <tr>
                                    <td>{{ s.applicant_name | default('N/A') }}</td>
                                    <td>{{ s.match_score }}%</td>
                                </tr>
                            {% endif %}         
                        {% endfor %}
                    </tbody>
                </table>`;
        } else if (type === "interviews") {
            content = `
                <h3>üóìÔ∏è Interviews Scheduled</h3>
                <p>This feature requires a dedicated 'interviews' data structure to display.</p>
                `;
        }
        
        // --- CORRECTED "Show All Records" logic ---
        else if (type === "all") {
            content = `
                <h3>üìã All Records Overview</h3>
                <p>This section provides a consolidated view of all data in the system.</p>

                <h4 style="margin-top:20px;">üíº Job Postings (Total: {{ jobs|length }})</h4>
                <table>
                    <thead><tr><th>ID</th><th>Title</th><th>Status</th><th>Date</th></tr></thead>
                    <tbody>
                        {% for job in jobs %}
                            <tr><td>{{ job.id }}</td><td>{{ job.title }}</td><td>{{ job.status }}</td><td>{{ job.created_at.strftime('%Y-%m-%d') }}</td></tr>
                        {% endfor %}
                    </tbody>
                </table>

                <h4 style="margin-top:20px;">üìÇ Uploaded Resumes (Total: {{ resumes|length }})</h4>
                <table>
                    <thead><tr><th>ID</th><th>Applicant Name</th><th>File Name</th></tr></thead>
                    <tbody>
                        {% for resume in resumes %}
                            <tr><td>{{ resume.id }}</td><td>{{ resume.owner_name | default('Applicant') }}</td><td>{{ resume.filename }}</td></tr>
                        {% endfor %}
                    </tbody>
                </table>

                <h4 style="margin-top:20px;">üìù Screened Resumes (Total: {{ screenings|length }})</h4>
                <table>
                    <thead><tr><th>ID</th><th>Applicant</th><th>Score</th><th>Screened Date</th></tr></thead>
                    <tbody>
                        {% for s in screenings %}
                            <tr>
                                <td>{{ s.id }}</td>
                                <td>{{ s.applicant_name | default('N/A') }}</td>
                                <td>{{ s.match_score }}%</td>
                                <td>{{ s.screened_at.strftime('%Y-%m-%d') }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            `;
        }
        
        document.getElementById("details-content").innerHTML = content;
    }

    // Auto-populate job description when a job is selected
    document.addEventListener('DOMContentLoaded', function() {
        const jobSelect = document.getElementById('job_id');
        const jobDescriptionTextarea = document.getElementById('job_description');
        
        if (jobSelect && jobDescriptionTextarea) {
            jobSelect.addEventListener('change', function() {
                const selectedOption = this.options[this.selectedIndex];
                
                if (selectedOption.value) {
                    // Get job details from data attributes
                    const jobTitle = selectedOption.getAttribute('data-title') || '';
                    const jobDescription = selectedOption.getAttribute('data-description') || '';
                    const jobLocation = selectedOption.getAttribute('data-location') || '';
                    const jobType = selectedOption.getAttribute('data-job-type') || '';
                    
                    // Build the job description text
                    let descriptionText = jobTitle;
                    if (jobDescription) {
                        descriptionText += '\n\n' + jobDescription;
                    }
                    if (jobLocation) {
                        descriptionText += '\n\nLocation: ' + jobLocation;
                    }
                    if (jobType) {
                        descriptionText += '\n\nJob Type: ' + jobType;
                    }
                    
                    // Populate the textarea
                    jobDescriptionTextarea.value = descriptionText;
                    
                    // Visual feedback
                    jobDescriptionTextarea.style.borderColor = '#08106E';
                    setTimeout(() => {
                        jobDescriptionTextarea.style.borderColor = '#95BEF5';
                    }, 2000);
                } else {
                    // Clear the textarea if no job is selected
                    jobDescriptionTextarea.value = '';
                }
            });
        }
    });

    // Toast Notification Function
    function showToast(message, type = 'default', duration = 3000) {
        const container = document.getElementById('toastContainer');
        if (!container) return;

        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        toast.textContent = message;
        container.appendChild(toast);

        setTimeout(() => toast.classList.add('show'), 10);

        setTimeout(() => {
            toast.classList.remove('show');
            setTimeout(() => container.removeChild(toast), 400);
        }, duration);
    }
</script>
</body>
</html>